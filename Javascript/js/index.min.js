$(function(){var a=null;const t=CatABI,e=CatBodyInfo,n=templates,r={gasLimit:"10000000",gasPrice:"1000000000000"},i=function(a){var t=[];return a.forEach(function(a){var e=new BigNumber(a);t.push(e.toFixed())}),t},o=async(a,t)=>{var e={image:"",type:""};switch(null!=t&&(a=0),a){case 1:e.image="StarArena_023",e.type="Fire";break;case 2:e.image="StarArena_020",e.type="Rock";break;case 3:e.image="StarArena_021",e.type="Grass";break;case 4:e.image="StarArena_022",e.type="Water";break;case 5:e.image="StarArena_019",e.type="Poison";break;default:e.image="StarArena_60",e.type="Buff"}return e},s=async a=>({operationName:"getAlianaByCatId",query:"query getAlianaByCatId($catId: Int!) { aliana(id: $catId) {   id   sireID   matronID   birthTime   genes   isCollections   baseFightAttr {     hp     atk     spd     chr     br     actionPoint     battlePower   }   lpLabor   elementType   bornFightBuff {     id     type     effectStr     effect {       millionthRatioValue       fixedValue       target       valueFromAttr       valueToAttr     }   } }}",variables:{catId:a},catId:a}),l=async a=>{var t=new BigNumber(a);return(await fetch("https://game.starcrazy.com/api/prod/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(await s(t.toNumber()))})).json()},d=async a=>{var t=[],e=new BigNumber(a);for(let a=0;a<8;a++)e=e.dividedToIntegerBy(256),t[a]=e.mod(256).toNumber(),e=e.dividedToIntegerBy(256);return t},c=async a=>{var t=new BigNumber(a),e=[];for(let a=0;a<8;a++)e[a]=t.mod(65536).mod(256).toNumber(),t=t.dividedToIntegerBy(65536);return e},u=async(a,t)=>{if(t<=0)return"cat/frame/special_01.png";var e=0;return a.forEach(function(a){0==a&&(e+=2),1==a&&(e+=10),2==a&&(e+=20),3==a&&(e+=40),4==a&&(e+=100)}),e>=0&&e<=50?"cat/frame/synthesis_06.png":e>50&&e<=120?"cat/frame/synthesis_05.png":e>120&&e<=240?"cat/frame/synthesis_07.png":e>240&&e<=500?"cat/frame/synthesis_03.png":e>500&&e<999999999?"cat/frame/synthesis_04.png":void 0},f=async a=>{var t=[];return a.forEach(function(a,n){var r=e[1e3*(n+1)+a+1];null!=r?t.push(r.Pic+".png"):t.push("")}),t};$(".btn-primary").on("click",async function(){if(""==$("#address").val().trim())return $("#address").notify("Input iotex address!",{position:"bottom"}),!1;$.LoadingOverlay("show");var e,s,g={address:$("#address").val(),nfts:[],totalDigP:0};try{g.nfts=await(async()=>{var e=[],n=$("#address").val(),s=null,g=null;null==a&&(s=new Antenna("https://api.iotex.one"),a=s.iotx),g=new Antenna.modules.Contract(t,"io1asxdtswkr9p6r9du57ecrhrql865tf2qxue6hw",{provider:a,signer:null});var p=new Antenna.modules.Contract(t,"io1mt5u8vzxzuwq7hut99t9tvduhykzgkfclwlsgj",{provider:a,signer:null}),y=i(await g.methods.tokensOfOwner(n,{account:null,defaultContractOptions:r})),m=i(await p.methods.depositedTokens(n,{account:null,defaultContractOptions:r}));return await async function(a,t){for(let e=0;e<a.length;e++)await t(a[e],e,a)}(m.concat(y),async a=>{var t=await l(a),n=await c(t.data.aliana.genes),r=await d(t.data.aliana.genes);e.push({nft_id:a,nft_digp:t.data.aliana.lpLabor,nft_style:await f(r),nft_qlty:n,nft_frame:await u(n,t.data.aliana.lpLabor),nft_elementType:await o(t.data.aliana.elementType,t.data.aliana.bornFightBuff),nft_baseFightAttr:t.data.aliana.baseFightAttr,nft_bornFightBuff:t.data.aliana.bornFightBuff})}),e})(),g.totalDigP=await(async a=>{var t=0;return a.forEach(function(a){t+=parseInt(a.nft_digp)}),t})(g.nfts),e=g.totalDigP,s=ejs.render(n.totalDigP,{totalDigp:e}),$(".totalDigP_Wrapper").html(s),function(a){var t=ejs.render(n.starz,a);$(".nft_wrapper").html(t)}(g)}catch(a){$.LoadingOverlay("hide"),$.notify("Error getting nfs!","error")}$.LoadingOverlay("hide")})});